"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getBackendBaseUrl = exports.getRepositoryUrl = exports.parseReportingError = exports.getPerfectoHeaders = void 0;
var cloudSuffix = '-perfectomobile-com';

var normalizeCloudName = cloud => cloud.endsWith(cloudSuffix) ? cloud : cloud + cloudSuffix;

var getPerfectoHeaders = (cloud, securityToken) => ({
  'perfecto-tenantid': normalizeCloudName(cloud),
  'Perfecto-Authorization': securityToken
});

exports.getPerfectoHeaders = getPerfectoHeaders;

var parseReportingError = error => {
  var data = error.data || error.response && error.response.data || error.message;
  return data && data.length > 0 && data[0].userMessage || data;
};

exports.parseReportingError = parseReportingError;

var getRepositoryUrl = cloud => {
  var envPrefix = '';

  if (process.env.NODE_ENV === 'preprod') {
    envPrefix = 'dev-stg.';
  }

  return "https://".concat(cloud, ".app.").concat(envPrefix, "perfectomobile.com/repository-management-webapp/rest/v1/repository-management/artifacts/direct");
};

exports.getRepositoryUrl = getRepositoryUrl;

var getBackendBaseUrl = function getBackendBaseUrl() {
  var cloud = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'tenant';
  var NASE_BACKEND_URL = process.env.NASE_BACKEND_URL;
  return NASE_BACKEND_URL || 'https://' + cloud + '.perfectomobile.com/lab-execution/v1';
};

exports.getBackendBaseUrl = getBackendBaseUrl;